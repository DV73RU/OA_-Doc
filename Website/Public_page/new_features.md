# Новые фичи

## Пушбук, квизы,  доп материалы, лайки и комментарии

1. Пушбук

Макет: [https://www.figma.com/proto/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=349%3A355&viewport=-800%2C292%2C0.09848355501890182&scaling=scale-down](https://www.figma.com/proto/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=349%3A355&viewport=-800%2C292%2C0.09848355501890182&scaling=scale-down)[https://www.figma.com/file/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=677%3A0](https://www.figma.com/file/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=677%3A0)Необходимо разработать механизм формирования события и отправки его в пользовательский календарь для последующего уведомления пользователя (пушбук).Требования:

1. Данная функция может быть прикреплена в админке к любой статье.
2. По умолчанию уведомление должно быть настроено на 9-00 утра в день события.
3. Необходимо предусмотреть возможность передать в событие URL той статьи, откуда был выполнен переход
4. Окно отображения имеет 4 основных элемента: миникартинка события (может быть изменена в админке - нужно предусмотреть определённый размер, вес и тип), заголовок события (может быть изменен в админке), добавление события в календарь: Google Calendar, Icaledar и телеграмм бот (не изменяемая часть)a. Синхронизация с Google Calendar должна производится следующим сценарием: Пользователь кликает на кнопку Google Calendar в событии. Его должно автоматически перебросить в интерфейс календаря на инструмент добавления события в календарь. В случае, если пользователь не авторизован ему будет предложено предварительно авторизоваться.b. Синхронизация с Icalendar будет производиться с такими требованиями и следующим сценарием:
    - i. кнопка "Icalendar" будет отображаться только на устройствах Apple.
    - ii. При клике на кнопку Icalendar пользователю на устройство скачивается файл, при запуске которого тапом, кликом или автоматически после загрузки на устройство и производится добавление события в его личный Icalendar с последующим уведомлением

c. При клике на кнопку "Телеграмм" Производится открытие приложение телеграмм и добавление события с уведомлением в чатбот OA. Далее производится телеграмм уведомление по логике, описанной в пункте 2.

2. Квиз

макет: [https://www.figma.com/proto/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=349%3A355&viewport=-800%2C292%2C0.09848355501890182&scaling=min-zoom](https://www.figma.com/proto/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=349%3A355&viewport=-800%2C292%2C0.09848355501890182&scaling=min-zoom)[https://www.figma.com/file/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=677%3A0](https://www.figma.com/file/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=677%3A0)Необходимо разработать механизм опросника, который так же как и пушбук/банер можно создать в админке и разместить в статье (сверху, в теле, снизу).При разработке необходимо учесть следующие требования:

1. Количество вопросов в квизе должно быть настраиваемым и будет от одного до пяти вопросов.
2. Количество ответов в каждом вопросе - три
3. Изменяемыми должны быть следующие элементы: заголовок квиза, текст вопроса и иконка вопроса. На этап этого релиза при прохождение не будет влиять на результат выдачи. Т.е. по окончанию квиза будет только один исход
4. Никакие данные мы на бэке не храним

3. Доп материалы

Макет: [https://www.figma.com/proto/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=349%3A355&viewport=-800%2C292%2C0.09848355501890182&scaling=min-zoom](https://www.figma.com/proto/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=349%3A355&viewport=-800%2C292%2C0.09848355501890182&scaling=min-zoom)[https://www.figma.com/file/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=677%3A0](https://www.figma.com/file/0vM3JZlCUS8YiOShO4Voaa/%D0%9E%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD-%D0%B6%D1%83%D1%80%D0%BD%D0%B0%D0%BB?node-id=677%3A0)Необходимо разработать функционал добавления материалов для скачивания, по аналогии механизмом скачивания исследований с лендинга Цифровизация.Должны быть соблюдены требования:

1. Материалы должны прикрепляться в админке к любой статье.
2. количество материалов, которые можно прикрепить к статье - 5
3. Блок скачивания должен "залипать при скролле
4. Необходимо предусмотреть скачивание как одного материала, так и всех материалов одновременно (архив)

4. Лайки и комментарии

Описание работы блока “Комментарии"

1. Комментарии к урокам отображаются всем пользователям.2. Комментарии имеет два типа вложения: комментарии пользователей и комментарии пользователей с ответами модератора.3. Любые комментарии пользователя публикуются только после прохождения модерации.4. Модератор может оставить комментарий, а может просто опубликовать комментарий без ответа.5. Отправленный пользователем, но не подтверждённый модератором комментарий отмечается тегом "на модерации". В этом состоянии комментарий может быть изменён или удалён пользователем.6. Комментарий прошедший модерацию может быть только удалён.7. Если удаляется комментарий, на который модератором был дан ответ - удаляется как комментарий, так и ответ модератора.8. Счётчик комментариев включает в себя как комментарии пользователя, так и ответы модератора.9. Элемент "Показать все ответы" - разворачивает все локальные ответы между пользователем и модератором.10. Элемент "Читать далее" - разворачивает только отдельные комментарии, в случае, если комментарий имеет более 6 строк текста11. Основные комментарии отображаются от нового к более старым. По умолчанию отображается в свёрнутом состоянии и показывается один комментарий. Если сообщения получены в один день, то последним выводится то, что прошло модерацию последним.12. Комментарии с ответами модераторов наоборот, отображается первый комментарий с ответом модератора. По умолчанию отображается в свернутом состоянии и показывается один комментарий с одним ответом модератора.13. Кнопка Удалить есть только в том случае, если это комментарий конкретного пользователя. Удалить чужой комментарий обычный пользователь не может

UPD: Комментарии теперь считаем только от пользователя

UPD:  в подписи от модератора [http://www.screencapture.ru/file/a7A30723](http://www.screencapture.ru/file/a7A30723) изменить текст на

C уважением, команда Open Academy

UPD к описанию: Договорились сделать следующее: Пользователь может удалять и редактировать комментарий. При редактировании комментария он не исчезает, меняется на изменённый но должен иметь статус "на модерации". В статусе "на модерации" комментарий может быть изменен сколь угодно много раз. Как только комментарий прошел модерацию и опубликован возможность редактировать комментарий пропадает. Удалить свой комментарий пользователь может в любой момент, даже с ответом администрации.

**Оповещение по добавлении комментария:** оповещение должно отправляться на почту [marina.prikhodko2@open.ru](mailto:marina.prikhodko2@open.ru). Логика отправки: при добавлении комментария сразу будет отправляться письмо с названием урока, куда был заведен комментарий; текст самого комментария; дата и время добавления. Данное изменение уже выполнено и ожидает релиза. По срокам реализации нужно обращаться к @Alex Kucherov 

Макет: [https://www.figma.com/file/VwNg8ZNpwKc5PkbhvR8Q95/Open-Academy.-%D0%9A%D0%B0%D1%80%D1%82%D0%BE%D1%87%D0%BA%D0%B0-%D0%BA%D1%83%D1%80%D1%81%D0%B0?node-id=228%3A1169](https://www.figma.com/file/VwNg8ZNpwKc5PkbhvR8Q95/Open-Academy.-%D0%9A%D0%B0%D1%80%D1%82%D0%BE%D1%87%D0%BA%D0%B0-%D0%BA%D1%83%D1%80%D1%81%D0%B0?node-id=228%3A1169)

[описание: Функционал блока ”Комментарии” в карточке урока.](/Website/DOC/block_Comments.md)